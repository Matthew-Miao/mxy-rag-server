# ğŸ¤– æ™ºèƒ½çŸ¥è¯†åŠ©æ‰‹ - RAGçŸ¥è¯†é—®ç­”ç³»ç»Ÿ

> åŸºäºSpring AIçš„ä¼ä¸šçº§RAGæ™ºèƒ½çŸ¥è¯†é—®ç­”ç³»ç»Ÿï¼Œè®©æ–‡æ¡£çŸ¥è¯†ç¬é—´å˜æˆAIåŠ©æ‰‹

[![GitHub](https://img.shields.io/badge/GitHub-mxy--rag--server-blue?logo=github)](https://github.com/Matthew-Miao/mxy-rag-server)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.5-brightgreen)](https://spring.io/projects/spring-boot)
[![Spring AI](https://img.shields.io/badge/Spring%20AI-1.0.0-orange)](https://spring.io/projects/spring-ai)
[![Java](https://img.shields.io/badge/Java-17-red)](https://openjdk.java.net/)
[![License](https://img.shields.io/badge/License-MIT-yellow)](https://opensource.org/licenses/MIT)

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æ™ºèƒ½çŸ¥è¯†åŠ©æ‰‹æ˜¯ä¸€ä¸ªåŸºäºRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯çš„ä¼ä¸šçº§çŸ¥è¯†é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒå¤šæ ¼å¼æ–‡æ¡£ä¸Šä¼ ã€æ™ºèƒ½å‘é‡åŒ–å­˜å‚¨ã€è¯­ä¹‰æ£€ç´¢å’ŒAIé—®ç­”ã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸ§  **æ™ºèƒ½é—®ç­”**ï¼šåŸºäºçŸ¥è¯†åº“çš„ç²¾å‡†AIé—®ç­”
- ğŸ“š **æ–‡æ¡£ç®¡ç†**ï¼šæ”¯æŒPDFã€Wordã€TXTç­‰å¤šæ ¼å¼æ–‡æ¡£
- ğŸ” **è¯­ä¹‰æ£€ç´¢**ï¼šå‘é‡åŒ–å­˜å‚¨å’Œç›¸ä¼¼åº¦æœç´¢
- ğŸ’¬ **å®æ—¶å¯¹è¯**ï¼šæµå¼å“åº”å’Œä¼šè¯ç®¡ç†
- ğŸ‘¥ **ç”¨æˆ·ç³»ç»Ÿ**ï¼šå®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ğŸ“„ æ–‡æ¡£ç®¡ç†**ï¼šæ”¯æŒPDFã€Wordã€TXTã€Markdownç­‰æ ¼å¼æ–‡æ¡£ä¸Šä¼ å’Œç®¡ç†
- **ğŸ” æ™ºèƒ½æ£€ç´¢**ï¼šåŸºäºå‘é‡ç›¸ä¼¼åº¦çš„è¯­ä¹‰æœç´¢ï¼Œç²¾å‡†åŒ¹é…ç›¸å…³å†…å®¹
- **ğŸ¤– AIé—®ç­”**ï¼šé›†æˆé˜¿é‡Œäº‘é€šä¹‰åƒé—®ï¼Œæ”¯æŒæµå¼å’Œé˜»å¡å¼é—®ç­”
- **ğŸ’¬ ä¼šè¯ç®¡ç†**ï¼šå®Œæ•´çš„å¯¹è¯ä¼šè¯åˆ›å»ºã€æŸ¥è¯¢ã€åˆ é™¤åŠŸèƒ½
- **ğŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ**ï¼šç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€å¯†ç ä¿®æ”¹ç­‰å®Œæ•´ç”¨æˆ·ç®¡ç†
- **ğŸ¨ å‰ç«¯ç•Œé¢**ï¼šç°ä»£åŒ–Webç•Œé¢ï¼Œæ”¯æŒèŠå¤©ã€çŸ¥è¯†åº“ç®¡ç†ç­‰åŠŸèƒ½
- **âš¡ é«˜æ€§èƒ½**ï¼šPostgreSQL + pgvectorå‘é‡å­˜å‚¨ï¼ŒHikariCPè¿æ¥æ± ä¼˜åŒ–

## ğŸ— æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Spring Boot 3.4.5 + Spring AI 1.0.0
- **è¯­è¨€**: Java 17
- **æ•°æ®åº“**: PostgreSQL + pgvector (å‘é‡å­˜å‚¨) + MySQL (ä¸šåŠ¡æ•°æ®)
- **ORM**: MyBatis-Plus 3.5.5 + Spring AI VectorStore
- **AIæ¨¡å‹**: é˜¿é‡Œäº‘é€šä¹‰åƒé—® (qwen-plus-latest) + text-embedding-v3

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æŠ€æœ¯**: åŸç”ŸHTML5 + CSS3 + JavaScript ES6+
- **ç•Œé¢**: ç™»å½•é¡µé¢ã€èŠå¤©ç•Œé¢ã€çŸ¥è¯†åº“ç®¡ç†ç•Œé¢
- **é€šä¿¡**: Fetch API + æµå¼å“åº”
- **æ ·å¼**: å“åº”å¼è®¾è®¡ + ç°ä»£åŒ–UIç»„ä»¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
mxy-rag-server/
â”œâ”€â”€ doc/                                    # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ prd.md                             # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ ç»¼åˆæŠ€æœ¯æ–‡æ¡£.md                      # æŠ€æœ¯æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ init_database.sql                  # PostgreSQLåˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ init_mysql_database.sql            # MySQLåˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ src/main/java/com/mxy/ai/rag/
â”‚   â”œâ”€â”€ web/controller/                    # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ UserController.java           # ç”¨æˆ·ç®¡ç†API
â”‚   â”‚   â”œâ”€â”€ ChatController.java           # æ™ºèƒ½å¯¹è¯API
â”‚   â”‚   â”œâ”€â”€ ChatSessionController.java    # ä¼šè¯ç®¡ç†API
â”‚   â”‚   â””â”€â”€ KnowledgeBaseController.java  # çŸ¥è¯†åº“ç®¡ç†API
â”‚   â”œâ”€â”€ service/                          # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ UserService.java              # ç”¨æˆ·æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ChatService.java              # å¯¹è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ChatSessionService.java       # ä¼šè¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ KnowledgeBaseService.java     # çŸ¥è¯†åº“æœåŠ¡
â”‚   â”œâ”€â”€ datasource/                       # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ entity/                       # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ mapper/                       # MyBatis Mapper
â”‚   â”‚   â””â”€â”€ dao/                          # DAOå±‚
â”‚   â””â”€â”€ config/                           # é…ç½®ç±»
â”‚       â””â”€â”€ MultiDataSourceConfig.java   # å¤šæ•°æ®æºé…ç½®
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ static/                           # å‰ç«¯é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ login.html                    # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ chat.html                     # èŠå¤©ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ knowledge.html                # çŸ¥è¯†åº“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ css/                          # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ js/                           # JavaScriptæ–‡ä»¶
â”‚   â”œâ”€â”€ application.yaml                  # åº”ç”¨é…ç½®
â”‚   â””â”€â”€ mapper/                           # MyBatis XMLæ˜ å°„
â””â”€â”€ pom.xml                               # Mavenä¾èµ–é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

**ç³»ç»Ÿè¦æ±‚**:
- Java 17+
- PostgreSQL 12+ (éœ€å®‰è£…pgvectoræ‰©å±•)
- MySQL 8.0+
- Maven 3.6+

**APIå¯†é’¥é…ç½®**:
```bash
# Windows
set AI_DASHSCOPE_API_KEY=your_dashscope_api_key

# Linux/Mac
export AI_DASHSCOPE_API_KEY=your_dashscope_api_key
```
## ğŸ¨ å‰ç«¯ç•Œé¢

### é¡µé¢åŠŸèƒ½
- **ğŸ” ç™»å½•é¡µé¢** (`login.html`): ç”¨æˆ·ç™»å½•ç•Œé¢ï¼Œæ”¯æŒç”¨æˆ·å/å¯†ç ç™»å½•
- **ğŸ’¬ èŠå¤©ç•Œé¢** (`chat.html`): æ™ºèƒ½å¯¹è¯ç•Œé¢ï¼Œæ”¯æŒå®æ—¶é—®ç­”ã€ä¼šè¯ç®¡ç†ã€Markdownæ¸²æŸ“
- **ğŸ“š çŸ¥è¯†åº“ç®¡ç†** (`knowledge.html`): æ–‡æ¡£ä¸Šä¼ ã€ç®¡ç†å’Œæœç´¢ç•Œé¢

### ç•Œé¢ç‰¹æ€§
- **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **ç°ä»£åŒ–UI**: ç®€æ´ç¾è§‚çš„ç•Œé¢è®¾è®¡
- **å®æ—¶äº¤äº’**: æµå¼å“åº”æ˜¾ç¤ºï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **Markdownæ”¯æŒ**: æ”¯æŒä»£ç é«˜äº®å’Œæ ¼å¼åŒ–æ˜¾ç¤º
- **æ–‡ä»¶æ‹–æ‹½**: æ”¯æŒæ‹–æ‹½ä¸Šä¼ æ–‡æ¡£æ–‡ä»¶

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# å¿…éœ€é…ç½®
AI_DASHSCOPE_API_KEY=your_dashscope_api_key    # é˜¿é‡Œäº‘DashScope APIå¯†é’¥
postgresql.host=localhost                       # PostgreSQLä¸»æœºåœ°å€
mysql.host=localhost                           # MySQLä¸»æœºåœ°å€
mysql.username=root                            # MySQLç”¨æˆ·å
mysql.password=your_password                   # MySQLå¯†ç 
```

### AIæ¨¡å‹é…ç½®
- **Chatæ¨¡å‹**: qwen-plus-latest (é˜¿é‡Œäº‘é€šä¹‰åƒé—®)
- **åµŒå…¥æ¨¡å‹**: text-embedding-v3 (1024ç»´å‘é‡)
- **è°ƒç”¨æ–¹å¼**: OpenAIå…¼å®¹æ¨¡å¼
- **APIåœ°å€**: https://dashscope.aliyuncs.com/compatible-mode

### ç³»ç»Ÿé…ç½®
- **æœåŠ¡ç«¯å£**: 9000
- **æ–‡ä»¶ä¸Šä¼ **: æœ€å¤§æ”¯æŒ10MBæ–‡ä»¶
- **å‘é‡ç»´åº¦**: 1024ç»´ (text-embedding-v3)
- **æ•°æ®åº“è¿æ¥æ± **: HikariCP (PostgreSQL: 12ä¸ªè¿æ¥, MySQL: 12ä¸ªè¿æ¥)
- **å¤šæ•°æ®æº**: PostgreSQL(å‘é‡) + MySQL(ä¸šåŠ¡)

## ğŸ“‹ é¡¹ç›®çŠ¶æ€

- âœ… **æ•°æ®åº“è®¾è®¡**: PostgreSQL + pgvector + MySQLåŒæ•°æ®æºé›†æˆ
- âœ… **çŸ¥è¯†åº“ç®¡ç†**: æ–‡æ¡£ä¸Šä¼ ã€æ–‡æœ¬æ’å…¥ã€å‘é‡å­˜å‚¨ã€è¯­ä¹‰æœç´¢
- âœ… **ç”¨æˆ·ç³»ç»Ÿ**: ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€å¯†ç ä¿®æ”¹ã€æƒé™ç®¡ç†
- âœ… **æ™ºèƒ½å¯¹è¯**: AIé—®ç­”ã€æµå¼å“åº”ã€ä¼šè¯ç®¡ç†ã€å¯¹è¯å†å²
- âœ… **å‰ç«¯ç•Œé¢**: ç™»å½•é¡µé¢ã€èŠå¤©ç•Œé¢ã€çŸ¥è¯†åº“ç®¡ç†ç•Œé¢
- âœ… **APIæ¥å£**: å®Œæ•´çš„RESTful APIï¼Œæ”¯æŒSwaggeræ–‡æ¡£
- ğŸ“‹ **WebSocket**: å®æ—¶é€šä¿¡ä¼˜åŒ– (è§„åˆ’ä¸­)
- ğŸ“‹ **éƒ¨ç½²æ–¹æ¡ˆ**: Dockerå®¹å™¨åŒ–éƒ¨ç½² (è§„åˆ’ä¸­)

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)](./doc/prd.md) - è¯¦ç»†çš„äº§å“è®¾è®¡å’Œä¸šåŠ¡éœ€æ±‚
- [æŠ€æœ¯å®ç°æ–‡æ¡£](./doc/technical_implementation.md) - æŠ€æœ¯æ¶æ„å’Œå®ç°ç»†èŠ‚
- [ç»¼åˆæŠ€æœ¯æ–‡æ¡£](./doc/ç»¼åˆæŠ€æœ¯æ–‡æ¡£.md) - æŠ€æœ¯æ¶æ„å’Œå®ç°ç»†èŠ‚
- [PostgreSQLæ•°æ®åº“åˆå§‹åŒ–](./doc/init_database.sql) - å‘é‡æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- [MySQLæ•°æ®åº“åˆå§‹åŒ–](./doc/init_mysql_database.sql) - ä¸šåŠ¡æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- [GitHubä»“åº“](https://github.com/Matthew-Miao/mxy-rag-server) - æºä»£ç å’Œç‰ˆæœ¬ç®¡ç†

## ğŸ“ è”ç³»æˆ‘

- **é¡¹ç›®è´Ÿè´£äºº**: Matthew-Miao
- **é‚®ç®±**: 2329385737@qq.com
- **GitHub**: [Matthew-Miao/mxy-rag-server](https://github.com/Matthew-Miao/mxy-rag-server)
---
**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025å¹´7æœˆ